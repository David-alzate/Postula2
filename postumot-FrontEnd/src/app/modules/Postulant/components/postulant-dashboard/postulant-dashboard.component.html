<section class="dashboard">
  <div class="hero-card">
    <div class="hero-text">
      <p class="eyebrow">Gestión de postulantes</p>
      <h1>Monitorea el talento registrado</h1>
      <p class="subtitle">
        Visualiza los postulantes cargados en la plataforma y registra nuevos perfiles.
      </p>
    </div>
    <button mat-flat-button color="primary" class="create-btn" (click)="openCreateModal()">
      <mat-icon>add</mat-icon>
      Crear postulante
    </button>
  </div>

  <div class="stats">
    <div class="stat-card">
      <span>Total de postulantes</span>
      <strong>{{ postulants.length }}</strong>
    </div>
  </div>

  <div class="state-card" *ngIf="loading">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Cargando postulantes...</p>
  </div>

  <div class="state-card error" *ngIf="!loading && errorMessage">
    <p>{{ errorMessage }}</p>
    <button mat-stroked-button color="primary" (click)="loadPostulants()">
      Reintentar
    </button>
  </div>

  <div class="state-card empty" *ngIf="!loading && !errorMessage && postulants.length === 0">
    <h3>Aún no hay postulantes registrados</h3>
    <p>Comienza creando un nuevo perfil desde el botón superior derecho.</p>
    <button mat-flat-button color="primary" (click)="openCreateModal()">Crear postulante</button>
  </div>

  <div class="postulant-grid" *ngIf="!loading && !errorMessage && postulants.length > 0">
    <article class="postulant-card" *ngFor="let postulant of postulants; trackBy: trackByPostulant">
      <div class="avatar">{{ getInitials(postulant) }}</div>

      <div class="postulant-info">
        <div class="info-header">
          <h3>{{ getFullName(postulant) }}</h3>
          <span class="document-pill">{{ postulant.documentType?.nombre || 'Sin tipo' }}</span>
        </div>
        <p class="document-number">Documento {{ postulant.document }}</p>
        <div class="contact-row">
          <span>{{ postulant.email }}</span>
          <span class="phone">{{ postulant.phone }}</span>
        </div>
      </div>
    </article>
  </div>
</section>
